{% extends "term/page.html" %}

{% block content %}
<h2 class="g-color-blue m-page-name">Отчеты</h2>
<span ng-init="search.limit=20;search.action_type='get_grid_content';search.status=1"></span>
<div class="section-container section-container__main auto" data-section="" data-options="deep_linking: true;" style="" ng-controller="GeneralController">
    <section class="section active">    
        <p class="title">
            <a>Добавить</a>
        </p>
        <div class="content">
            <div class="content-row">
                <p class="m-hint">Здесь вы можете создать новый отчет, который будет выслан вам в течении 5 минут. Или же создать отчет который будет вам высылаться периодически - раз в день, неделю или месяц.</p>
            </div>
                {% include 'term/report/form.html' %} 
            <div class="content-row">
                <p class="m-hint">Вы не можете создать два одинаковых периодических отчета.</p>
            </div>
        </div>
    </section>
    <section class="section active">    
        <p class="title">
            <a>Активные</a>
        </p>
        <div class="content">
            <div class="content-row">
                <p class="m-hint">На этой странице вы можете посмотреть и изменить список активных периодических очетов.</p>
            </div>
            <table class="m-spot-table" ng-controller="ReportController">
                <thead>
                    <tr>
                        <th>Название</th>
                        <th>Период</th>
                        <th>Тип</th>
                        <th>Excel</th>
                    </tr>
                </thead>
                <tbody>
                    <tr ng-click="getPersonView(person.id)"
                        ng-repeat="report_stack in result">
                        <td>{[{report_stack.name}]}</td>
                        <td>{[{report_stack.interval_name}]}</td>
                        <td>{[{report_stack.type_name}]}</td>
                        <td>
                            <span class="m-card-act g-round"
                                ng-class="(report_stack.excel==1)?'active':''"></span>
                        </td>
                    </tr>
                    <tr class="m-table-bottom" ng-show="search.page_count">
                        <td colspan="10">
                            <ui-pagination 
                                cur="pagination.cur" 
                                total="pagination.total" 
                                display="{[{pagination.display}]}">
                            </ui-pagination>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
    </section>
</div>
{% endblock %}
{% block footer_script %}
<script type="text/javascript" src="/static/term/angular/term/controllers/report.js"></script> 
{{ super() }}
{% endblock %} 