{% import 'term/block.html' as block %}
{% extends "term/page.html" %}

{% block content %}
<h2 class="g-color-blue m-page-name">Терминалы</h2>
<span ng-init="search.limit=20;search.action_type='get_grid_content'"></span>
<div class="section-container section-container__main auto" data-section="" data-options="deep_linking: true;" style="">
    <section class="section active" style="padding-top: 49px;">
        <p class="title"><a href="#all">Активные</a></p>
        <div class="content" data-slug="all">
            <div class="content-row">
                <p class="m-hint">Настройте работу Ваших бесконтактных терминалов: добавьте к ним события и настройте их так, как Вам нужно.</p>
            </div>
            <table class="m-spot-table">
                <thead>
                    <tr>
                        <th><span>ID</span></th>
                        <th>Имя</th>
                        <th>Владелец</th>
                        <th>Сеанс связи</th>
                        <th>Статус</th>
                    </tr>
                </thead>
                <tbody>
                    <tr ng-click="getTerminalInfo(term.term_id)" ng-repeat="term in result" class="m-t-cont-row">
                        <td>{[{term.term_id}]}</td>
                        <td>{[{term.name}]}</td>
                        <td>{[{term.firm}]}</td>
                        <td>{[{term.seans_date}]}</td>
                        <td><span class="m-card-act {[{term.status}]} g-round"></span></td>
                    </tr>
                    <tr class="m-table-bottom" ng-show="search.page_count">
                        <td colspan="10">
                            <ui-pagination 
                                cur="pagination.cur" 
                                total="pagination.total" 
                                display="{[{pagination.display}]}">
                            </ui-pagination>
                        </td>
                    </tr>
                </tbody>
            </table>

        </div>
    </section>
    <section class="section">
        <p class="title"><a href="#add">Добавить терминал</a></p>
        <div class="content" data-slug="add">
            <form class="custom" id="add_term" name="addTermForm">
                <div class="g-clear-b g-clearfix">
                    <div class="content-row left g-clearfix">
                        <label for="add-id">ID* (только числа)</label>
                        <input 
                            id="add-id" 
                            type="number"
                            name="id"
                            min="1"
                            ng-model="term.id"
                            required>
                    </div>
                    <div class="content-row g-clearfix">
                        <label for="add-name">Название*</label>
                        <input 
                            id="add-name" 
                            type="text"
                            name="name"
                            ng-maxlength="300"
                            ng-model="term.name"
                            required>
                    </div>
                </div>
                <div class="content-row g-clear-b" ng-init="term.type={{term.type}}">
                    <label for="add-type">Тип*</label>
                    <select 
                        id="add-type" 
                        class="medium"
                        name="type"
                        ng-model="term.type">
                        {% for key, value in term_types %}
                            <option value="{{key}}">{{value}}</option>
                        {% endfor %}
                    </select>
                </div>
                <div class="content-row g-clearfix" ng-init="term.upload_start='{{term.upload_start}}'">
                    <label for="add-start-upload">Время первой отправки отчета (чч:мм)</label>
                    <input 
                        id="add-start-upload" 
                        type="text"
                        minlength="5"
                        maxlength="5"
                        ng-model="term.upload_start">
                </div>
                <div class="content-row g-clearfix" ng-init="term.upload_period={{term.upload_period}}">
                    <label for="add-upload-period">Период между отправками (мин)</label>
                    <input 
                        id="add-start-upload" 
                        type="text"
                        minlength="1"
                        maxlength="4"
                        ng-model="term.upload_period">
                </div>
                <div class="content-row g-clearfix" ng-init="term.download_start='{{term.download_start}}'">
                    <label for="add-download-period">Время первой загрузки конфигурации (чч:мм)</label>
                    <input 
                        id="add-download-period" 
                        type="text"
                        minlength="5"
                        maxlength="5"
                        ng-model="term.download_start">
                </div>
                <div class="content-row g-clearfix" ng-init="term.download_period={{term.download_period}}">
                    <label for="add-cardnumber">Период между загрузками (мин)</label>
                    <input 
                        id="add-start-download" 
                        type="text"
                        minlength="1"
                        maxlength="4"
                        ng-model="term.download_period">
                </div>
                <div class="content-row g-clearfix">
                    <a 
                        ng-click="addTerminal(term, addTermForm.$valid)"
                        class="f-spot-button">
                        Добавить
                    </a>
                </div>
            </form>
        </div>
    </section>
</div>
{% endblock %}