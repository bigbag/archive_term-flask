{% extends "term/page.html" %}

{% block content %}
<h2 class="g-color-blue m-page-name">Терминалы</h2>
<span ng-init="search.action_type='get_grid_content';search.period='day';search.limit=7"></span>
<div class="content" ng-controller="ReportController">
    <div class="section-container section-container__main auto" data-section="" data-options="deep_linking: true;" style="">
        <div class="m-content-page">
            <div class="content-row">
                <p class="m-hint">Здесь вы можете посмотреть детальный отчет по вашим терминалам.</p>
            </div>
            <div class="large-6 content-row f-content-row_button g-clearfix">
                <div class="add-active">
                    <a ng-repeat="period in report_detaled_periods"
                        ng-class="{active: search.period==period.value}"
                        class="f-spot-button small"
                        ng-click="search.period=period.value;search.page=1;pagination.cur=1">
                        {[{period.name}]}
                    </a>
                </div>
            </div>
            <table class="m-spot-table">
                <thead>
                <tr>
                    <th><span>Дата</span></th>
                    <th>
                        <table  class="m-spot-table">
                        <tr>
                            <th width="300">Терминал</th>
                            <th>Количество</th>
                        </tr>
                        </table>
                    </th>
                </tr>
                </thead>
                <tbody>
                <tr ng-repeat="report in result" class="m-t-cont-row">
                    <td>{[{report.creation_date}]}</td>
                    <td>
                    <table  class="m-spot-table">
                        <tr ng-repeat="row in report.detaled">
                            <td width="300">{[{row.term}]}</td>
                            <td>{[{row.count}]}</td>
                        </tr>
                        <tr>
                            <td><strong>Всего</strong></td>
                            <td><strong>{[{report.count}]}</strong></td>
                        </tr>
                    </table>
                    </td>
                </tr>
                <tr class="m-table-bottom">
                    <td colspan="10">
                        <ui-pagination 
                            cur="pagination.cur" 
                            total="pagination.total" 
                            display="{[{pagination.display}]}">
                        </ui-pagination>
                    </td>
                </tr>
                <tr class="m-t-cont-row" ng-hide="search.page_count">
            
                    <td colspan="6" class="m-t-nothing">
                        В Вашей компании нет терминалов, обслуживающих бесконтактные карты Mobispot.
                        Добавьте терминал, и получайте подробный отчет об операциях на них.
                    </td>
                </tr>
                </tbody>
            </table>
        </div>
    </div>
</div>
{% endblock %}
{% block footer_script %}
<script type="text/javascript" src="/static/term/angular/term/controllers/report.js"></script>
{{ super() }}
{% endblock %} 